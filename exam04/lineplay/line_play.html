<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">
<title>Line Play</title>
<link rel="stylesheet" type="text/css" href="css/common.css">
<script src="https://code.jquery.com/jquery-latest.js"></script>
<script>
var exam = exam || {};
exam.View = exam.View || {}; 

exam.View.linePlay = function() {
	this.init();
};

exam.View.linePlay.prototype = {
	aSetIndex: [],
	nBefore: 0,
	nCurrent: 0, //현재 캐릭터 Index
	init: function() {
		this._assignElements();
		this._attachEventHandlers();
	},
	_assignElements: function() {
		this._linePlayWrap = $('.create_wrap');
		this._linePlayImg = this._linePlayWrap.find('.swiper-slide');
		this._linePlayBtn = this._linePlayWrap.find('.btn_random');
	},
	_attachEventHandlers: function() {
		this._linePlayBtn.on('click', $.proxy(this._onClickBtn, this));
	},
	_onClickBtn: function() {
		if(this.aSetIndex.length == 0){ //보여질 이미지의 번호를 담고있는 배열을 초기화한다.
			this._setCharacter();
		}
		if(this.nBefore == this.nCurrent){
			this._showCharacter();
		}
		this._showCharacter();
		this._deleteCharacter();

	},
	_setCharacter: function() {
		for (var i = 0, max = this._linePlayImg.length; i < max; i++) { //배열에 이미지의 수만큼 인텍스를 추가한다.
			this.aSetIndex[i] = i;
		}
	},
	_showCharacter: function() {
		this.nCurrent = Math.floor((Math.random() * this.aSetIndex.length)); //보여질 랜덤 이미지를 정한다.
		this._linePlayImg.eq(this.nCurrent).show().siblings().hide();
	},
	_deleteCharacter: function() {
		this.aSetIndex.splice(this.nCurrent, 1); //보여진 이미지를 삭제한다.
		this.nBefore = this.nCurrent;
	}
};

$(function() {
	var oExamViewlinePlay = new exam.View.linePlay();
});
</script>
</head>
<body>
<div class="create_wrap">
	<div class="swiper-container">
		<ul class="swiper-wrapper">
			<li class="swiper-slide">
				<span class="avatar_box">
					<img src="img/avatar_01.jpg" alt="avatar image" class="img_avatar">
				</span>
			</li>
			<li class="swiper-slide">
				<span class="avatar_box">
					<img src="img/avatar_02.jpg" alt="avatar image" class="img_avatar">
				</span>
			</li>
			<li class="swiper-slide">
				<span class="avatar_box">
					<img src="img/avatar_03.jpg" alt="avatar image" class="img_avatar">
				</span>
			</li>
			<li class="swiper-slide">
				<span class="avatar_box">
					<img src="img/avatar_04.jpg" alt="avatar image" class="img_avatar">
				</span>
			</li>
			<li class="swiper-slide">
				<span class="avatar_box">
					<img src="img/avatar_05.jpg" alt="avatar image" class="img_avatar">
				</span>
			</li>
			<li class="swiper-slide">
				<span class="avatar_box">
					<img src="img/avatar_06.jpg" alt="avatar image" class="img_avatar">
				</span>
			</li>
			<li class="swiper-slide">
				<span class="avatar_box">
					<img src="img/avatar_07.jpg" alt="avatar image" class="img_avatar">
				</span>
			</li>
			<li class="swiper-slide">
				<span class="avatar_box">
					<img src="img/avatar_08.jpg" alt="avatar image" class="img_avatar">
				</span>
			</li>
			<li class="swiper-slide">
				<span class="avatar_box">
					<img src="img/avatar_09.jpg" alt="avatar image" class="img_avatar">
				</span>
			</li>
			<li class="swiper-slide">
				<span class="avatar_box">
					<img src="img/avatar_10.jpg" alt="avatar image" class="img_avatar">
				</span>
			</li>
			<li class="swiper-slide">
				<span class="avatar_box">
					<img src="img/avatar_11.jpg" alt="avatar image" class="img_avatar">
				</span>
			</li>
			<li class="swiper-slide">
				<span class="avatar_box">
					<img src="img/avatar_12.jpg" alt="avatar image" class="img_avatar">
				</span>
			</li>
		</ul>
	</div>
	<button type="button" class="btn_random"><span>다른 아바타 보기</span></button>
</div>
</body>
</html>